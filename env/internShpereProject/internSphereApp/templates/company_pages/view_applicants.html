{% extends "main_pages/base.html" %}
{% load static %}

{% block nav_and_footer %}
    
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>View Applicants</title>
    <link rel="stylesheet" href="{% static 'css/view_applicants.css' %}">
</head>
<body>
<div class="heading">
    <h1>View Applicants</h1>
</div>
    <div class="applicants-list">

       <!-- view_applicants.html -->

       <h2>Applicants for {{ internship.title }}</h2>
       <ul>
           {% with has_pending=False %}
               {% for application in applicants %}
               
                   {% if application.status == 'Pending' %}
                       {% with has_pending=True %}
                       {% endwith %}
                       <div class="dashboard-item">
                        <li>{{ application.student.user.first_name }} {{ application.student.user.last_name }} - {{ application.student.email }}
                            - Status: {{ application.status }}
                            <form action="{% url 'update_application_status' application.id 'Accepted' %}" method="post">
                                {% csrf_token %}
                                <button type="submit" style="background-color: green;">Accept</button>
                            </form>
                            <form action="{% url 'update_application_status' application.id 'Rejected' %}" method="post">
                                {% csrf_token %}
                                <button type="submit" style="background-color: red;">Reject</button>
                            </form>
                        </li>
                    </div>
                      
                   {% endif %}
       
               {% endfor %}
       
               {% if not has_pending %}
                   <li>No pending applicants yet.</li>
               {% endif %}
           {% endwith %}
       </ul>
       

{% comment %} 
        <div class="applicant">
            <h2>John Doe</h2>
            <p>Position Applied: Software Developer Intern</p>
            <a href="{% url 'student_profile' %}" class="btn">View Profile</a>
        </div>

        <div class="applicant">
            <h2>Jane Smith</h2>
            <p>Position Applied: Marketing Intern</p>
            <a href="{% url 'student_profile' %}" class="btn">View Profile</a>
        </div> {% endcomment %}
    </div>
</body>
</html>


{% endblock nav_and_footer %}
    